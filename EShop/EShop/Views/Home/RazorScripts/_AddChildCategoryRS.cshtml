@model IEnumerable<EShop.Models.Product>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">

    $('#add-child-modal-btn').click(function () {
            if ($.trim($('#add-child-category-name').val()) && $.trim($('#add-child-category-description').val())) {
                var AddCategoryPostModel = {
                    CategoryName: $('#add-child-category-name').val(),
                    ParentCategoryId: "@ViewBag.CurrentCategoryId",
                    CategoryDescription: $('#add-child-category-description').val()
                }

                $.ajax({
                    type: 'POST',
                    url: '@Url.Action("AddCategory", "Category")',
                    data: JSON.stringify(AddCategoryPostModel),
                    dataType: 'json',
                    contentType: "application/json",
                    success: function (response) {
                        if (response == 0) {
                            $('#add-child-modal').hide();
                            location.reload();// page refresh
                        }
                        else if (response == 1) {
                            $('#add-child-error-modal').attr('hidden', false);
                            $('#add-child-error-message').text(" Some  value violated the integrity constraints!")
                        }
                    },
                    failure: function (response) {
                        $('#add-child-error-modal').attr('hidden', false);
                        $('#add-child-error-message').text(" Some unexpected error occured. Please try again!")
                    }
                });
            }
            else {
                $('#add-child-error-modal').attr('hidden', false);
                $('#add-child-error-message').text(" Illegal input.")
            }
        });
</script>